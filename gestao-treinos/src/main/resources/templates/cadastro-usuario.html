<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" 
	xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://ultraq.net.nz/thymeleaf/layout"
	layout:decorator="layout-links">
	
	<head>
		<title>Novo usuário</title>
	</head>	

	<section layout:fragment="conteudo">
		<form class="form-horizontal" method="POST" th:action="@{${EXECUTA_CADASTRO_LINK}}" th:object="${usuario}">
		
  			<div layout:include="mensagem-erro"></div>
  			<div layout:include="mensagem-geral"></div>

			<div class="panel panel-default">
				<div class="panel-heading">
					<div class="clearfix">
						<h2 class="panel-title cr-titulo-panel">Cadastro de usuário</h2>
						<a class="btn btn-link cr-link-panel" th:href="@{${HOME_LINK}}">Voltar parar página inicial</a>
					</div>
				</div>
				
				<div class="panel-body cr-body" >
				
					<!-- <<< campos de cadastro >>> -->
					<!-- ========================== -->
					<!-- Só são mostrados quando o usuário ainda está sendo cadastrado... -->
					<!-- ...ou ainda existem erros pendentes -->
					<div th:if="${status != 'OK'}">
						<div class="form-group" th:classappend="${#fields.hasErrors('nomeCompleto')} ? 'has-error'">
							<label for="nomeCompleto" class="control-label col-sm-2" >Nome completo</label>
							<div class="col-sm-3">
								<input class="form-control" type="text" id="nomeCompleto" th:field="*{nomeCompleto}"/>
							</div>
						</div>
						<div class="form-group" th:classappend="${#fields.hasErrors('dataNascimento')} ? 'has-error'">
							<label for="dataNascimento" class="control-label col-sm-2" >Data de nascimento</label>
							<div class="col-sm-2">
								<input class="form-control" type="text" id="dataNascimento" th:field="*{dataNascimento}"/>
							</div>
						</div>
						<div class="form-group" th:classappend="${#fields.hasErrors('endereco')} ? 'has-error'">
							<label for="endereco" class="control-label col-sm-2" >Endereço</label>
							<div class="col-sm-4">
								<input class="form-control" type="text" id="endereco" th:field="*{endereco}"/>
							</div>
						</div>
						<div class="form-group" th:classappend="${#fields.hasErrors('email')} ? 'has-error'">
							<label for="email" class="control-label col-sm-2" >E-mail</label>
							<div class="col-sm-3">
								<input class="form-control" type="text" id="email" th:field="*{email}"/>
							</div>
						</div>
						<div class="form-group"  th:classappend="${#fields.hasErrors('pwd')} ? 'has-error'">
							<label for="pwd" class="control-label col-sm-2" >Senha</label>
							<div class="col-sm-2">
								<input class="form-control" type="text" id="pwd" th:field="*{pwd}"/>
							</div>
						</div>
						<div class="form-group">
							<div class="col-sm-offset-2 col-sm-2 pull-left">
					  			<button type="submit" class="btn btn-primary btn-cadastrar-usuario">Finalizar cadastro</button>
					  		</div>
						</div>
					</div>
					<!-- Final dos campos de cadastro -->
					
					<!-- Mensagem de confirmação -->
					<!-- Só aparece quando houve sucesso no cadastro do usuário-->
					<div class="form-group" th:if="${status == 'OK'}">
						<div>
							<span class="msg-cadastro-finalizado">
								Processo de cadastro do usuário
								<i>
									<strong>
										<span style="color:green; font-size:130%" th:text=" ${usuarioLogado} "></span>
									</strong>
								</i>
								finalizado com sucesso!
							</span>
						</div>
						<div>
					  		<a th:href="@{${HOME_USER_LINK}}" class="btn btn-primary btn-entrar">Entrar no Sistema</a>
						</div>
					</div>
					<!-- Final da mensagem -->

				</div>
			</div>
		</form>			
	</section>
</html>